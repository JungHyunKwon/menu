/**
 * @name menu
 * @author JungHyunKwon
 * @since 2018-02-23
 * @param {object} option({event : string, cut : object(number : number), namespace : string})
 * @param {jQueryElement || element} element
 * @return {jQueryElement || jQueryObject}
 */
try{if("function"!=typeof window.jQuery)throw"제이쿼리가 없습니다.";!function(e){var t=e(document),a=[],i="_",n={active:"active",state:"state",has:"has",solo:"solo",rule:"rule",open:"open",prev:"prev",next:"next",cut:"cut",initialized:"menu_initialized"};function s(e){var t="none";if(arguments.length)if(t=Object.prototype.toString.call(e).toLowerCase().replace("[object ","").replace("]",""),void 0===e)t="undefined";else if("number"===t&&isNaN(e))t="NaN";else if("number"!==t||isFinite(e))if(e===window)t="window";else if(e===document)t="document";else if(e.tagName)t="element";else if("function"==typeof window.jQuery&&e instanceof window.jQuery){var a=e.length,i=0;for(t=[];i<a;i++){var n=e[i],l=s(n);"window"!==l&&"document"!==l&&"element"!==l||t.push(n)}var o=t.length;t=o&&a===o?"jQueryElement":"jQueryObject"}else"date"===t&&isNaN(new Date(e))?t="Invalid Date":"function"===t&&/^class\s/.test(e.toString())&&(t="class");else t=e.toString();return t}if(n.activePrev=n.active+i+n.prev,n.activeNext=n.active+i+n.next,n.actived=n.active+"d",n.activedPrev=n.actived+i+n.prev,n.activedNext=n.actived+i+n.next,!window.console instanceof Object){window.console={method:["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],comment:[]};for(var l=0,o=window.console.method.length;l<o;l++)"function"!=typeof window.console[window.console.method[l]]&&(window.console[window.console.method[l]]=function(){var e=[],t=arguments.length;if(t>1)for(var a=0;a<t;a++)e.push(arguments[a]);else 1===t&&(e=arguments[0]);return t&&this.comment.push(e),e})}e(function(){var l=e("body");function o(e){var t=s(e),a=!1;return"window"!==t&&"document"!==t&&"element"!==t&&"jQueryElement"!==t||(a=!0),a}function d(t,a){for(var i=e(t),n="string"==typeof a?a.length:0,s=[],l=0,o=i.length;l<o;l++){var d=i.eq(l),r=d.attr("class");if(r)for(var c=0,p=(r=r.split(/\s/)).length;c<p;c++){var u=r[c];u.substring(0,n)===a&&(d.removeClass(u),s.push(u))}}return 1===s.length?s=s[0]:s.length||(s=i),s}e.fn.menu=function(r,c){var p,u=this.first(),v=u[0],h=v.style,m=s(r),f=function(t){for(var i=e(t),n=[],l=a.length,o=0,d=i.length;o<d;o++){var r=i.eq(o),c=!1,p=0;for(l=a.length;p<l;p++){var u=a[p];if("object"===s(u)&&r.is(u.element)){n.push(p),c=!0;break}}c||n.push(-1)}return 1===n.length&&(n=n[0]),n}(v),g=a[f],$=e.Event("menu");if("string"===m){if(r=r.toLowerCase(),g){var x=g.option;if("destroy"===r){var y=x.namespace;x.$depthCutItem.remove(),u.removeClass(n.initialized),d(x.$depthItem,n.rule),l.removeClass(x.className.globalActive+" "+x.className.globalOpen),d(u,n.state),x.$depthItem.removeClass(n.has+" "+n.solo+" "+n.activePrev+" "+n.active+" "+n.activeNext+" "+n.activedPrev+" "+n.actived+" "+n.activedNext),h.height="",t.off("keydown."+y),x.$openElement.off("click."+y+" focusin."+y),x.$closeElement.off("click."+y+" focusout."+y),x.$depth1.off("mouseover."+y+" mouseleave."+y),x.$depthText.off("focusin."+y+" focusout."+y+" click."+y),x.$depthAndText.off("mouseover."+y),x.$depthTitle2.off("mouseout."+y),a.splice(f,1)}else if("spy"===r){o(c)||(c=x.$activedDepthText[0]);for(var C=e(c),b=x.$depthText.length,w=0,T=C.length;w<T;w++){var N=!1,I=C[w],k=0;for(b=x.$depthText.length;k<b;k++)x.$depthText.eq(k).is(I)&&(N=!0);N&&x.openMenu.call(I,$)}}}}else if(o(v)){g&&u.menu("destroy"),"object"!==m&&(r={}),r.namespace="string"==typeof(p=r.namespace)?p.replace(/\s/g,""):p,"string"==typeof r.namespace&&""!==r.namespace||(r.namespace=u.attr("id")||(u.attr("class")||"").split(/\s/)[0]||v.tagName.toLowercase()+(a.length+1)),"object"!==s(r.cut)&&(r.cut={}),"string"==typeof r.event&&(r.event=r.event.toLowerCase()),"mouse"!==r.event&&"click"!==r.event&&(r.event="click"),r.$openElement=e('div[data-menu-open="'+r.namespace+'"] [data-menu-button]'),r.$closeElement=e('div[data-menu-close="'+r.namespace+'"] [data-menu-button]'),r.interval=250,r.className={globalActive:r.namespace+i+n.active,globalOpen:r.namespace+i+n.open},r.type=parseInt(u.attr("data-menu-type"),10),r.type||(r.type=1),r.$depth=u.find("div[data-menu-depth]"),r.$depth1=r.$depth.filter('div[data-menu-depth="1"]'),r.$depth1Text=r.$depth1.find('a[data-menu-text="1"], button[data-menu-text="1"]'),r.$depthTitle1=r.$depth1.find('div[data-menu-title="1"]'),r.$depthTitle1WildCard=r.$depthTitle1.add(r.$depthTitle1.find("*")),r.$depthTitle2=r.$depth1.find('div[data-menu-title="2"]'),r.$depth2=r.$depth.filter('[data-menu-depth="2"]'),r.$depthList=r.$depth.find("ul[data-menu-list]"),r.$depthItem=r.$depthList.children("li"),r.$depthText=r.$depth1.find("a[data-menu-text], button[data-menu-text]"),r.$depthLastText=r.$depthText.last(),r.$depthAndText=r.$depth.not('div[data-menu-depth="1"]').add(r.$depthText),r.$activedDepthText=r.$depth1.find("a[data-menu-text][data-menu-actived], button[data-menu-text][data-menu-actived]").last(),r.$activedDepthItem=r.$activedDepthText.parents("li"),h.transitionProperty="none",r.menuHeight=v.clientHeight,h.transitionProperty="",r.$activedDepthItem.prev("li").addClass(n.activedPrev),r.$activedDepthItem.addClass(n.actived),r.$activedDepthItem.next("li").addClass(n.activedNext),u.addClass(n.initialized);for(var w in r.cut){var P=r.cut[w];"number"===s(w=parseInt(w,10))&&"number"===s(P)&&P>1&&u.find('div[data-menu-depth="'+w+'"]:first-of-type ul[data-menu-list]:first > li:nth-child('+P+"n)").next("li").prev("li").after('<li class="'+n.cut+'">&nbsp;</li>')}r.$depthCutItem=r.$depthList.children("li."+n.cut);w=0;for(var S=r.$depthList.length;w<S;w++)for(var j=r.$depthList.eq(w).children("li"),D=(k=0,j.length);k<D;k++){var E=j.eq(k);E.addClass(n.rule+(k+1)),E.find("div[data-menu-depth]:first").length?E.addClass(n.has):E.addClass(n.solo)}r.addStateClass=function(t){var a=e(t).parents("li");d(u,n.state);for(var i=0,s=a.length;i<s;i++)u.addClass(n.state+(r.$depthItem.index(a[i])+1))},r.setSpy=function(e){r.$activedDepthText.length?u.menu("spy"):r.closeMenu.call(e,$)},r.openMenu=function(t){var a=e(this).parents("li"),i=a.find('div[data-menu-depth="2"]'),s=a.last(),o=a.prev("li"),d=a.next("li");if(r.$depthCutItem.is(o)&&(o=o.prev("li")),r.$depthCutItem.is(d)&&(d=d.next("li")),"mouse"===r.event&&"focusin"!==t.type)r.closeMenu.call(this,t);else if("click"===r.event){var c=a.find("[data-menu-text]:first").filter("a, button").closest("li"),p=c.siblings("li");c.add(p).removeClass(n.activePrev+" "+n.active+" "+n.activeNext)}if(l.addClass(r.className.globalActive),o.addClass(n.activePrev),a.addClass(n.active),d.addClass(n.activeNext),r.addStateClass(s.add(s.find("div[data-menu-depth]:first-of-type ul[data-menu-list]:first > li")).filter("."+n.active).last().find("[data-menu-text]:first").filter("a, button")[0]),1===r.type){for(var u=[],v=0,m=r.$depth2.length;v<m;v++)u[v]=r.$depth2.eq(v).children().filter(function(t,a){var i=e(a).css("position");return"static"===i||"relative"===i}).first().outerHeight()||0;(u=Math.max.apply(null,u)||"")&&(u+=r.menuHeight,u+="px"),h.height=u}else if(2===r.type&&i.length){var f=i.children().filter(function(t,a){var i=e(a).css("position");return"static"===i||"relative"===i}).first().outerHeight()||"";f&&(f+=r.menuHeight,f+="px"),h.height=f}t.stopPropagation()},r.closeMenu=function(t){var a=e(this);if("mouse"===r.event)l.removeClass(r.className.globalActive),d(u,n.state),u.height(""),r.$depthItem.removeClass(n.activePrev+" "+n.active+" "+n.activeNext);else{var i=this,s=a.parents("li"),o=s.eq(1);if(a.is(r.$depthLastText)){var c=o.prev("li"),p=o.next("li");i=s.eq(2).find("[data-menu-text]:first").filter("a, button")[0],r.$depthCutItem.is(c)&&(c=c.prev("li")),r.$depthCutItem.is(p)&&(p=p.next("li")),c.removeClass(n.activePrev),o.removeClass(n.active),p.removeClass(n.activeNext),r.addStateClass(i)}else{var v=s.first(),m=v.prev("li"),f=v.next("li");r.$depthCutItem.is(m)&&(m=m.prev("li")),r.$depthCutItem.is(f)&&(f=f.next("li")),m.removeClass(n.activePrev),v.removeClass(n.active),f.removeClass(n.activeNext),r.addStateClass(o.find("[data-menu-text]:first").filter("a, button")[0])}r.$depth1Text.is(i)&&(l.removeClass(r.className.globalActive),1!==r.type&&2!==r.type||(h.height=""))}t.stopPropagation()},"mouse"===r.event?(r.$depthAndText.on("mouseover."+r.namespace,r.openMenu),r.$depth1.on("mouseover."+r.namespace,function(t){l.hasClass(r.className.globalActive)&&(1===r.type&&e(this).is(t.target)?r.setSpy(this):2===r.type&&r.$depthTitle1WildCard.is(t.target)||r.openMenu.call(this,t))}).on("mouseleave."+r.namespace,function(e){r.setSpy(this)}),r.$depthTitle2.on("mouseout",function(e){1===r.type&&r.setSpy(this)})):r.$depthText.on("click."+r.namespace,function(t){var a=e(this),i=a.closest("li"),s=i.find("div[data-menu-depth]:first"),l=this.tagName.toLowerCase(),o=i.hasClass(n.active);("a"===l&&a.attr("href")===s.find("ul[data-menu-list]:first > li:first-child a[data-menu-text]:first").attr("href")||"button"===l)&&o?(r.setSpy(this),t.preventDefault()):s.length&&!o&&(r.openMenu.call(this,t),t.preventDefault())}),r.$openElement.on("click."+r.namespace,function(e){l.toggleClass(r.className.globalOpen),e.preventDefault()}).on("focusin."+r.namespace,function(e){l.removeClass(r.className.globalOpen)}),r.$closeElement.on("click."+r.namespace+" focusout."+r.namespace,function(e){l.removeClass(r.className.globalOpen),r.$openElement.focus(),"click"===e.type&&e.preventDefault()}),r.$depthText.on("focusin."+r.namespace,function(e){r.isPressTabKey&&r.openMenu.call(this,e)}).on("focusout."+r.namespace,function(e){r.isPressTabKey&&r.setSpy(this)}),t.on("keydown."+r.namespace,function(e){9===(e.keyCode||e.which)&&(r.isPressTabKey=!0),r.keydownTimer&&(clearTimeout(r.keydownTimer),r.keydownTimer=0),r.keydownTimer=setTimeout(function(){r.isPressTabKey=!1},r.interval)}),a.push({element:v,option:r}),r.setSpy()}return u}})}(jQuery)}catch(e){console.error(e)}