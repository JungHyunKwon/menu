/**
 * @name menu
 * @author JungHyunKwon
 * @since 2018-02-23
 * @param {object} option {event : string, cut : object[number || string[number-number] : number], namespace : string}
 * @return {jQueryElement || jQueryObject}
 */
try{!function(e){if("function"!=typeof e)throw"제이쿼리가 없습니다.";var t=[],a="_",n={active:"active",state:"state",has:"has",solo:"solo",open:"open",prev:"prev",next:"next",cut:"cut",initialized:"menu_initialized"};function i(t){var a=!1;function n(e){var t=!1;try{t=document.documentElement.contains(e)}catch(e){}return e!==window&&e!==document||(t=!0),t}return(n(t)||function(t){var a=!1;if(t instanceof e){var i=t.length;a=[];for(var s=0;s<i;s++){var l=t[s];n(l)&&a.push(l)}var o=a.length;a=!(!o||i!==o)}return a}(t))&&(a=!0),a}function s(t,a){for(var n=[],i=e(t),s="string"==typeof a?a.length:0,l=0,o=i.length;l<o;l++){var r=i.eq(l),d=r.attr("class");if(d)for(var c=0,p=(d=d.split(/\s/)).length;c<p;c++){var v=d[c];v.substring(0,s)===a&&(r.removeClass(v),n.push(v))}}return 1===n.length&&(n=n[0]),n}n.activePrev=n.active+a+n.prev,n.activeNext=n.active+a+n.next,n.actived=n.active+"d",n.activedPrev=n.actived+a+n.prev,n.activedNext=n.actived+a+n.next,e(function(){var l=e("body");e.fn.menu=function(o){var r=this.first(),d=r[0]||{},c=d.style,p=function(a){for(var n=e(a),i=[],s=t.length,l=0,o=n.length;l<o;l++){var r=n.eq(l),d=!1,c=0;for(s=t.length;c<s;c++){var p=t[c];if(p instanceof Object&&p.constructor===Object&&r.is(p.element)){i.push(c),d=!0;break}}d||i.push(-1)}return 1===i.length&&(i=i[0]),i}(d),v=t[p],u=e.Event("menu");if("string"==typeof o){if(o=o.toLowerCase(),v){var h=v.option;if("destroy"===o){var f=h.namespace;h.$depthCutItem.remove(),r.removeClass(n.initialized),l.removeClass(h.className.globalActive+" "+h.className.globalOpen),s(r,n.state),h.$depthItem.removeClass(n.has+" "+n.solo+" "+n.activePrev+" "+n.active+" "+n.activeNext+" "+n.activedPrev+" "+n.actived+" "+n.activedNext),c.height="",h.$openElement.off("click."+f),h.$closeElement.off("click."+f),h.$depth1.off("mouseover."+f+" mouseleave."+f),h.$depthText.off("click."+f),h.$depthAndText.off("mouseover."+f),h.$depthText.off("keydown."+f),h.$depthTitle1.off("focusin."+f+" focusout."+f),h.$depthTitle2.off("mouseout."+f),t.splice(p,1)}else if("spy"===o){var m=arguments[1];i(m)||(m=h.$activedDepthLastText[0]),m=e(m).first()[0],h.$depthText.is(m)&&h.openMenu.call(m,u)}}}else if(i(d)){var $="",g=parseInt(r.attr("data-menu-type"),10);function x(e){var t="";return e>0&&(t='ul[data-menu-list="'+e+'"]',console.log(t)),t}function C(t){var a=e(t).parents("li"),i=[];s(r,n.state);for(var l=0,d=a.length;l<d;l++){var c=n.state+(o.$depthItem.index(a[l])+1);i.push(c),r.addClass(c)}return 1===i.length&&(i=i[0]),i}function y(t){var a=!1;return o.$activedDepthLastText.length&&("click"===o.event?(o.$depth1Text.is(t)&&!e(t).closest("li").hasClass(n.actived)||r.is(t))&&(a=!0):a=!0),a?r.menu("spy"):o.closeMenu.call(t,u),t}function b(t,a){var n=e(t);"string"==typeof a&&(a=a.toLowerCase());for(var i=0,s=n.length;i<s;i++)if(o.$depthCutItem.is(n[i])){var l=n.eq(i);"prev"===a?n[i]=l.prev("li")[0]:"next"===a&&(n[i]=l.next("li")[0])}return e(n)}v&&r.menu("destroy"),o instanceof Object&&o.constructor===Object||(o={}),o.type=g||1,g||r.attr("data-menu-type",1),o.namespace&&"string"==typeof o.namespace||(o.namespace=r.attr("id")||d.tagName.toLowerCase()+(t.length+1)),o.cut instanceof Object&&o.cut.constructor===Object||(o.cut={}),"string"==typeof o.event&&(o.event=o.event.toLowerCase()),"mouse"!==o.event&&"click"!==o.event&&(o.event="mouse"),o.$openElement=e('div[data-menu-open="'+o.namespace+'"] button[data-menu-button]'),o.$closeElement=e('div[data-menu-close="'+o.namespace+'"] button[data-menu-button]'),o.className={globalActive:o.namespace+a+n.active,globalOpen:o.namespace+a+n.open},o.$wildCard=r.add(r.find("*")),o.$depth=r.find("div[data-menu-depth]"),o.$depth1=o.$depth.filter('div[data-menu-depth="1"]'),o.$depth1Text=o.$depth1.find('a[data-menu-text="1"], button[data-menu-text="1"]'),o.$depthTitle=o.$depth1.find("div[data-menu-title]"),o.$depthTitle1=o.$depthTitle.filter('[data-menu-title="1"]'),o.$depthTitle2=o.$depthTitle.filter('[data-menu-title="2"]'),o.$depth2=o.$depth.filter('[data-menu-depth="2"]'),o.$depthList=o.$depth.find("ul[data-menu-list]"),o.$depthItem=o.$depthList.children("li"),o.$depthText=o.$depth1.find("a[data-menu-text], button[data-menu-text]"),o.$depthLastText=o.$depthText.last(),o.$depthAndText=o.$depth.not('div[data-menu-depth="1"]').add(o.$depthText),o.$activedDepthLastText=o.$depth1.find("[data-menu-text][data-menu-actived]").filter("a, button").last(),o.$activedDepthItem=o.$activedDepthLastText.parents("li"),o.$wildCard.css("transition-property","none"),$=d.clientHeight,o.$wildCard.css("transition-property",""),o.$activedDepthItem.prev("li").addClass(n.activedPrev),o.$activedDepthItem.addClass(n.actived),o.$activedDepthItem.next("li").addClass(n.activedNext),r.addClass(n.initialized);for(var T in o.cut){var N=T.split("-"),w=N.length,I=parseInt(N[0],10),k=parseInt(o.cut[T],10),L=r;if(w>1)for(var P=0;P<w;P++){var M=parseInt(N[P],10);if(!(M>0)){L.length=0;break}var D=P+1,O=x(D);D!==w&&(O+=" > li:nth-child("+M+")"),L=L.find(O)}else 1===w&&I>1&&(L=L.find(x(I)));if(!L.is(r)&&k>1){P=0;for(var A=L.length;P<A;P++)L.eq(P).children("li:nth-child("+k+"n)").next("li").prev("li").after('<li class="'+n.cut+'">&nbsp;</li>')}}o.$depthCutItem=o.$depthList.children("li."+n.cut);T=0;for(var q=o.$depthItem.length;T<q;T++){var E=o.$depthItem.eq(T);E.find("div[data-menu-depth]:first").length?E.addClass(n.has):E.addClass(n.solo)}o.openMenu=function(t){var a=e(this).parents("li"),i=a.first(),s=a.last(),r=s.find('div[data-menu-depth="2"]'),d=b(a.prev("li").get(),"prev"),p=b(a.next("li").get(),"next");if("mouse"===o.event)o.closeMenu.call(this,t);else{var v=a.find("[data-menu-text]:first").filter("a, button").closest("li");v.add(v.siblings("li")).removeClass(n.activePrev+" "+n.active+" "+n.activeNext)}if(l.addClass(o.className.globalActive),d.addClass(n.activePrev),a.addClass(n.active),p.addClass(n.activeNext),C(s.add(s.find("ul[data-menu-list]:first > li")).filter("."+n.active).last().find("[data-menu-text]:first").filter("a, button")[0]),1===o.type||2===o.type){var u=i.find("div[data-menu-depth]:first");function h(){var t="";if(1===o.type){t=[];for(var a=0,n=o.$depth2.length;a<n;a++)t[a]=o.$depth2.eq(a).children().filter(function(t,a){var n=e(a).css("position");return"static"===n||"relative"===n}).first().outerHeight()||0;t=Math.max.apply(null,t)||""}else 2===o.type&&(t=r.children().filter(function(t,a){var n=e(a).css("position");return"static"===n||"relative"===n}).first().outerHeight()||"");t&&(t+=$,t+="px"),c.height=t}h(),u.length&&u.one("transitionend."+o.namespace,function(e){i.hasClass(n.active)&&h()})}t.stopPropagation()},o.closeMenu=function(t){var a=e(this);if("mouse"===o.event)l.removeClass(o.className.globalActive),s(r,n.state),c.height="",o.$depthItem.removeClass(n.activePrev+" "+n.active+" "+n.activeNext);else{var i=this,d=a.parents("li");if(a.is(o.$depthLastText)){var p=b(d.prev("li").get(),"prev"),v=b(d.next("li").get(),"next");i=d.last().find('[data-menu-text="1"]').filter("a, button")[0],p.removeClass(n.activePrev),d.removeClass(n.active),v.removeClass(n.activeNext),s(r,n.state)}else{var u=d.first(),h=b(u.prev("li")[0],"prev"),f=b(u.next("li")[0],"next");h.removeClass(n.activePrev),u.removeClass(n.active),f.removeClass(n.activeNext),C(d.eq(1).find("[data-menu-text]:first").filter("a, button")[0])}o.$depth1Text.is(i)&&(l.removeClass(o.className.globalActive),1!==o.type&&2!==o.type||(c.height=""))}t.stopPropagation()},o.toggleMenu=function(t){for(var a=e(this),i=a.closest("li"),s=i.find("div[data-menu-depth]:first"),l=s.find("ul[data-menu-list]:first > li a[data-menu-text]:first-of-type"),r=this.tagName.toLowerCase(),d=i.hasClass(n.active),c=a.attr("href")||"",p=!1,v=0,u=l.length;v<u;v++)if(c===l.eq(v).attr("href")){p=!0;break}s.length&&(d?"button"!==r&&!p&&window.confirm("콘텐츠로 이동하시겠습니까?")||(y(this),t.preventDefault()):(o.openMenu.call(this,t),t.preventDefault())),t.stopPropagation()},"mouse"===o.event?(o.$depthAndText.on("mouseover."+o.namespace,o.openMenu),o.$depth1.on("mouseover."+o.namespace,function(t){l.hasClass(o.className.globalActive)&&(1===o.type&&e(this).is(t.target)||2===o.type&&!o.$depthTitle1.add(o.$depthTitle1.find("*")).is(t.target))&&y(this)}).on("mouseleave."+o.namespace,function(e){y(this)}),o.$depthTitle1.on("focusin."+o.namespace,function(e){1===o.type&&o.openMenu.call(this,e)}).on("focusout."+o.namespace,function(e){1===o.type&&y(this)}),o.$depthTitle2.on("mouseout."+o.namespace,function(e){1===o.type&&y(this)}),o.$depthText.on("keydown."+o.namespace,function(e){13===(e.keyCode||e.which)&&o.toggleMenu.call(this,e)})):o.$depthText.on("click."+o.namespace,o.toggleMenu),o.$openElement.on("click."+o.namespace,function(e){l.toggleClass(o.className.globalOpen)}),o.$closeElement.on("click."+o.namespace,function(e){l.removeClass(o.className.globalOpen)}),t.push({element:d,option:o}),y(d)}return r}})}(window.jQuery)}catch(e){console.error(e)}