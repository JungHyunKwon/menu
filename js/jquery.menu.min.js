/**
 * @name menu
 * @author JungHyunKwon
 * @since 2018-02-23
 * @param {object} option {event : string, cut : object[number || string[number-number] : number], namespace : string}
 * @return {jQueryElement || jQueryObject}
 */
try{(function($){'use strict';if(typeof $==='function'){var _register=[],_separator='_',_language=$('html').attr('lang'),_className={active:'active',state:'state',has:'has',solo:'solo',open:'open',prev:'prev',next:'next',cut:'cut',initialized:'menu'+_separator+'initialized'};if(_language){_language=_language.toLowerCase()}else{_language='en'}_className.activePrev=_className.active+_separator+_className.prev;_className.activeNext=_className.active+_separator+_className.next;_className.actived=_className.active+'d';_className.activedPrev=_className.actived+_separator+_className.prev;_className.activedNext=_className.actived+_separator+_className.next;function _getType(value){var result;if(arguments.length){if(value===null){result='null'}else if(value===undefined){result='undefined'}else{result=Object.prototype.toString.call(value).toLowerCase().replace('[object ','').replace(']','');if(result==='date'&&isNaN(new Date(value))){result='Invalid Date'}else if(result==='number'){if(isNaN(value)){result='NaN'}else if(!isFinite(value)){result=value.toString()}}else if(result==='console'){result='object'}}}return result}function _isElement(element){var result=!1;function isElement(element){var result=!1;try{result=document.documentElement.contains(element)}catch(error){}if(element===window||element===document){result=!0}return result}function isJQueryElement(element){var result=!1;if(element instanceof $){var elementLength=element.length;result=[];for(var i=0;i<elementLength;i++){var elementI=element[i];if(isElement(elementI)){result.push(elementI)}}var resultLength=result.length;if(resultLength&&elementLength===resultLength){result=!0}else{result=!1}}return result}if(isElement(element)||isJQueryElement(element)){result=!0}return result}function _removePrefixClass(element,value){var result=[],$element=$(element),valueLength=(typeof value==='string')?value.length:0;for(var i=0,elementLength=$element.length;i<elementLength;i++){var $elementI=$element.eq(i),className=$elementI.attr('class');if(className){className=className.split(/\s/);for(var j=0,classNameLength=className.length;j<classNameLength;j++){var classNameJ=className[j];if(classNameJ.substring(0,valueLength)===value){$elementI.removeClass(classNameJ);result.push(classNameJ)}}}}if(result.length===1){result=result[0]}return result}function _getRegistIndex(element){var $element=$(element),result=[],registerLength=_register.length;for(var i=0,elementLength=$element.length;i<elementLength;i++){var $elementI=$element.eq(i),isBreak=!1;for(var j=0,registerLength=_register.length;j<registerLength;j++){var registerJ=_register[j];if(_getType(registerJ)==='object'&&$elementI.is(registerJ.element)){result.push(j);isBreak=!0;break}}if(!isBreak){result.push(-1)}}if(result.length===1){result=result[0]}return result}$(function(){var _$body=$('body');$.fn.menu=function(option){var $thisFirst=this.first(),thisFirst=$thisFirst[0]||{},thisFirstStyle=thisFirst.style,index=_getRegistIndex(thisFirst),register=_register[index],event=$.Event('menu');if(typeof option==='string'){option=option.toLowerCase();if(register){var registerOption=register.option;if(option==='destroy'){var registerNamespace=registerOption.namespace;registerOption.$depthCutItem.remove();$thisFirst.removeClass(_className.initialized);_$body.removeClass(registerOption.className.globalActive+' '+registerOption.className.globalOpen);_removePrefixClass($thisFirst,_className.state);registerOption.$depthItem.removeClass(_className.has+' '+_className.solo+' '+_className.activePrev+' '+_className.active+' '+_className.activeNext+' '+_className.activedPrev+' '+_className.actived+' '+_className.activedNext);thisFirstStyle.height='';registerOption.$openElement.off('click.'+registerNamespace);registerOption.$closeElement.off('click.'+registerNamespace);registerOption.$depth1.off('mouseover.'+registerNamespace+' mouseleave.'+registerNamespace);registerOption.$depthText.off('click.'+registerNamespace);registerOption.$depthAndText.off('mouseover.'+registerNamespace);registerOption.$depthText.off('keydown.'+registerNamespace);registerOption.$depthTitle1.off('focusin.'+registerNamespace+' focusout.'+registerNamespace);registerOption.$depthTitle2.off('mouseout.'+registerNamespace);_register.splice(index,1)}else if(option==='spy'){var element=arguments[1];if(!_isElement(element)){element=registerOption.$activedDepthLastText[0]}element=$(element).first()[0];if(registerOption.$depthText.is(element)){registerOption.openMenu.call(element,event)}}}}else if(_isElement(thisFirst)){var menuHeight='',type=parseInt($thisFirst.attr('data-menu-type'),10);if(register){$thisFirst.menu('destroy')}if(_getType(option)!=='object'){option={}}option.type=type||1;if(!type){$thisFirst.attr('data-menu-type',1)}if(!option.namespace||typeof option.namespace!=='string'){option.namespace=$thisFirst.attr('id')||thisFirst.tagName.toLowerCase()+(_register.length+1)}if(_getType(option.cut)!=='object'){option.cut={}}if(typeof option.event==='string'){option.event=option.event.toLowerCase()}if(option.event!=='mouse'&&option.event!=='click'){option.event='mouse'}option.$openElement=$('div[data-menu-open="'+option.namespace+'"] button[data-menu-button]');option.$closeElement=$('div[data-menu-close="'+option.namespace+'"] button[data-menu-button]');option.className={globalActive:option.namespace+_separator+_className.active,globalOpen:option.namespace+_separator+_className.open};option.$wildCard=$thisFirst.add($thisFirst.find('*'));option.$depth=$thisFirst.find('div[data-menu-depth]');option.$depth1=option.$depth.filter('div[data-menu-depth="1"]');option.$depth1Text=option.$depth1.find('a[data-menu-text="1"], button[data-menu-text="1"]');option.$depthTitle=option.$depth1.find('div[data-menu-title]');option.$depthTitle1=option.$depthTitle.filter('[data-menu-title="1"]');option.$depthTitle2=option.$depthTitle.filter('[data-menu-title="2"]');option.$depth2=option.$depth.filter('[data-menu-depth="2"]');option.$depthList=option.$depth.find('ul[data-menu-list]');option.$depthItem=option.$depthList.children('li');option.$depthText=option.$depth1.find('a[data-menu-text], button[data-menu-text]');option.$depthLastText=option.$depthText.last();option.$depthAndText=option.$depth.not('div[data-menu-depth="1"]').add(option.$depthText);option.$activedDepthLastText=option.$depth1.find('[data-menu-text][data-menu-actived]').filter('a, button').last();option.$activedDepthItem=option.$activedDepthLastText.parents('li');option.$wildCard.css('transition-property','none');menuHeight=thisFirst.clientHeight;option.$wildCard.css('transition-property','');option.$activedDepthItem.prev('li').addClass(_className.activedPrev);option.$activedDepthItem.addClass(_className.actived);option.$activedDepthItem.next('li').addClass(_className.activedNext);$thisFirst.addClass(_className.initialized);function getDepthListQuery(value){var result='';if(value>0){result='ul[data-menu-list="'+value+'"]'}return result}function addStateClass(element){var $element=$(element),$parentsDepthItem=$element.parents('li'),result=[];_removePrefixClass($thisFirst,_className.state);for(var i=0,parentsDepthItemLength=$parentsDepthItem.length;i<parentsDepthItemLength;i++){var state=_className.state+(option.$depthItem.index($parentsDepthItem[i])+1);result.push(state);$thisFirst.addClass(state)}if(result.length===1){result=result[0]}return result}function setSpy(element){var isSpy=!1;if(option.$activedDepthLastText.length){if(option.event==='click'){if((option.$depth1Text.is(element)&&!$(element).closest('li').hasClass(_className.actived))||$thisFirst.is(element)){isSpy=!0}}else{isSpy=!0}}if(isSpy){$thisFirst.menu('spy')}else{option.closeMenu.call(element,event)}return element}function filterDepthCutItem(element,direction){var $element=$(element);if(typeof direction==='string'){direction=direction.toLowerCase()}for(var i=0,elementLength=$element.length;i<elementLength;i++){if(option.$depthCutItem.is($element[i])){var $elementI=$element.eq(i);if(direction==='prev'){$element[i]=$elementI.prev('li')[0]}else if(direction==='next'){$element[i]=$elementI.next('li')[0]}}}return $($element)}for(var i in option.cut){var number=i.split('-'),numberLength=number.length,depth=parseInt(number[0],10),cut=parseInt(option.cut[i],10),$depthList=$thisFirst;if(numberLength>1){for(var j=0;j<numberLength;j++){var numberJ=parseInt(number[j],10);if(numberJ>0){var count=j+1,query=getDepthListQuery(count);if(count!==numberLength){query+=' > li:nth-child('+numberJ+')'}$depthList=$depthList.find(query)}else{$depthList.length=0;break}}}else if(numberLength===1&&depth>1){$depthList=$depthList.find(getDepthListQuery(depth))}if(!$depthList.is($thisFirst)&&cut>1){for(var j=0,depthListLength=$depthList.length;j<depthListLength;j++){$depthList.eq(j).children('li:nth-child('+cut+'n)').next('li').prev('li').after('<li class="'+_className.cut+'">&nbsp;</li>')}}}option.$depthCutItem=option.$depthList.children('li.'+_className.cut);for(var i=0,depthItemLength=option.$depthItem.length;i<depthItemLength;i++){var $depthItemI=option.$depthItem.eq(i);if($depthItemI.find('div[data-menu-depth]:first').length){$depthItemI.addClass(_className.has)}else{$depthItemI.addClass(_className.solo)}}option.openMenu=function(event){var $this=$(this),$parentsDepthItem=$this.parents('li'),$parentDepthItem=$parentsDepthItem.first(),$parentsDepthLastItem=$parentsDepthItem.last(),$depth2=$parentsDepthLastItem.find('div[data-menu-depth="2"]'),$parentsDepthPrevItem=filterDepthCutItem($parentsDepthItem.prev('li').get(),'prev'),$parentsDepthNextItem=filterDepthCutItem($parentsDepthItem.next('li').get(),'next');if(option.event==='mouse'){option.closeMenu.call(this,event)}else{var $siblingsParentDepthItem=$parentsDepthItem.find('[data-menu-text]:first').filter('a, button').closest('li');$siblingsParentDepthItem.add($siblingsParentDepthItem.siblings('li')).removeClass(_className.activePrev+' '+_className.active+' '+_className.activeNext)}_$body.addClass(option.className.globalActive);$parentsDepthPrevItem.addClass(_className.activePrev);$parentsDepthItem.addClass(_className.active);$parentsDepthNextItem.addClass(_className.activeNext);addStateClass($parentsDepthLastItem.add($parentsDepthLastItem.find('ul[data-menu-list] > li')).filter('.'+_className.active).last().find('[data-menu-text]:first').filter('a, button')[0]);if(option.type===1||option.type===2){var $nextDepth=$parentDepthItem.find('div[data-menu-depth]:first');function setDepth2Height(){var result='';if(option.type===1){result=[];for(var i=0,depth2Length=option.$depth2.length;i<depth2Length;i++){result[i]=option.$depth2.eq(i).children().filter(function(index,element){var position=$(element).css('position');return(position==='static'||position==='relative')?!0:!1}).first().outerHeight()||0}result=Math.max.apply(null,result)||''}else if(option.type===2){result=$depth2.children().filter(function(index,element){var position=$(element).css('position');return(position==='static'||position==='relative')?!0:!1}).first().outerHeight()||''}if(result){result+=menuHeight;result+='px'}thisFirstStyle.height=result}setDepth2Height();if($nextDepth.length){$nextDepth.one('transitionend.'+option.namespace,function(event){if($parentDepthItem.hasClass(_className.active)){setDepth2Height()}})}}event.stopPropagation()};option.closeMenu=function(event){var $this=$(this);if(option.event==='mouse'){_$body.removeClass(option.className.globalActive);_removePrefixClass($thisFirst,_className.state);thisFirstStyle.height='';option.$depthItem.removeClass(_className.activePrev+' '+_className.active+' '+_className.activeNext)}else{var element=this,$parentsDepthItem=$this.parents('li');if($this.is(option.$depthLastText)){var $parentsDepthPrevItem=filterDepthCutItem($parentsDepthItem.prev('li').get(),'prev'),$parentsDepthNextItem=filterDepthCutItem($parentsDepthItem.next('li').get(),'next');element=$parentsDepthItem.last().find('[data-menu-text="1"]').filter('a, button')[0];$parentsDepthPrevItem.removeClass(_className.activePrev);$parentsDepthItem.removeClass(_className.active);$parentsDepthNextItem.removeClass(_className.activeNext);_removePrefixClass($thisFirst,_className.state)}else{var $parentDepthItem=$parentsDepthItem.first(),$parentDepthPrevItem=filterDepthCutItem($parentDepthItem.prev('li')[0],'prev'),$parentDepthNextItem=filterDepthCutItem($parentDepthItem.next('li')[0],'next');$parentDepthPrevItem.removeClass(_className.activePrev);$parentDepthItem.removeClass(_className.active);$parentDepthNextItem.removeClass(_className.activeNext);addStateClass($parentsDepthItem.eq(1).find('[data-menu-text]:first').filter('a, button')[0])}if(option.$depth1Text.is(element)){_$body.removeClass(option.className.globalActive);if(option.type===1||option.type===2){thisFirstStyle.height=''}}}event.stopPropagation()};option.toggleMenu=function(event){var $this=$(this),$parentDepthItem=$this.closest('li'),$nextDepth=$parentDepthItem.find('div[data-menu-depth]:first'),$nextText=$nextDepth.find('ul[data-menu-list]:first > li a[data-menu-text]:first-of-type'),tagName=this.tagName.toLowerCase(),isActive=$parentDepthItem.hasClass(_className.active),href=$this.attr('href')||'',hasText=!1;for(var i=0,nextTextLength=$nextText.length;i<nextTextLength;i++){if(href===$nextText.eq(i).attr('href')){hasText=!0;break}}if($nextDepth.length){if(isActive){if(tagName==='button'||hasText||!window.confirm((_language==='ko')?'콘텐츠로 이동하시겠습니까?':'Move to contents?')){setSpy(this);event.preventDefault()}}else{option.openMenu.call(this,event);event.preventDefault()}}event.stopPropagation()};if(option.event==='mouse'){option.$depthAndText.on('mouseover.'+option.namespace,option.openMenu);option.$depth1.on('mouseover.'+option.namespace,function(event){if(_$body.hasClass(option.className.globalActive)&&((option.type===1&&$(this).is(event.target))||(option.type===2&&!option.$depthTitle1.add(option.$depthTitle1.find('*')).is(event.target)))){setSpy(this)}}).on('mouseleave.'+option.namespace,function(event){setSpy(this)});option.$depthTitle1.on('focusin.'+option.namespace,function(event){if(option.type===1){option.openMenu.call(this,event)}}).on('focusout.'+option.namespace,function(event){if(option.type===1){setSpy(this)}});option.$depthTitle2.on('mouseout.'+option.namespace,function(event){if(option.type===1){setSpy(this)}});option.$depthText.on('keydown.'+option.namespace,function(event){var keyCode=event.keyCode||event.which;if(keyCode===13){option.toggleMenu.call(this,event)}})}else{option.$depthText.on('click.'+option.namespace,option.toggleMenu)}option.$openElement.on('click.'+option.namespace,function(event){_$body.toggleClass(option.className.globalOpen)});option.$closeElement.on('click.'+option.namespace,function(event){_$body.removeClass(option.className.globalOpen)});_register.push({element:thisFirst,option:option});setSpy(thisFirst)}return $thisFirst}})}else{throw '제이쿼리가 없습니다.'}})(window.jQuery)}catch(error){console.error(error)}