/**
 * @name menu
 * @author JungHyunKwon
 * @since 2018-02-23
 * @param {object} option {event : string, cut : object[number || string[number-number] : number], namespace : string}
 * @return {jQueryElement || jQueryObject}
 */
try{!function(e){if("function"!=typeof e)throw"제이쿼리가 없습니다.";var t=[],a="_",n={active:"active",state:"state",has:"has",solo:"solo",open:"open",prev:"prev",next:"next",cut:"cut",initialized:"menu_initialized"};function i(t){var a=!1;function n(e){var t=!1;try{t=document.documentElement.contains(e)}catch(e){}return e!==window&&e!==document||(t=!0),t}return(n(t)||function(t){var a=!1;if(t instanceof e){var i=t.length;a=[];for(var s=0;s<i;s++){var l=t[s];n(l)&&a.push(l)}var r=a.length;a=!(!r||i!==r)}return a}(t))&&(a=!0),a}function s(t,a){for(var n=[],i=e(t),s="string"==typeof a?a.length:0,l=0,r=i.length;l<r;l++){var o=i.eq(l),d=o.attr("class");if(d)for(var c=0,p=(d=d.split(/\s/)).length;c<p;c++){var v=d[c];v.substring(0,s)===a&&(o.removeClass(v),n.push(v))}}return 1===n.length&&(n=n[0]),n}n.activePrev=n.active+a+n.prev,n.activeNext=n.active+a+n.next,n.actived=n.active+"d",n.activedPrev=n.actived+a+n.prev,n.activedNext=n.actived+a+n.next,e(function(){var l=e("body");e.fn.menu=function(r){var o=this.first(),d=o[0]||{},c=d.style,p=function(a){for(var n=e(a),i=[],s=t.length,l=0,r=n.length;l<r;l++){var o=n.eq(l),d=!1,c=0;for(s=t.length;c<s;c++){var p=t[c];if(p instanceof Object&&p.constructor===Object&&o.is(p.element)){i.push(c),d=!0;break}}d||i.push(-1)}return 1===i.length&&(i=i[0]),i}(d),v=t[p],u=e.Event("menu");if("string"==typeof r){if(r=r.toLowerCase(),v){var h=v.option;if("destroy"===r){var f=h.namespace;h.$depthCutItem.remove(),o.removeClass(n.initialized),l.removeClass(h.className.globalActive+" "+h.className.globalOpen),s(o,n.state),h.$depthItem.removeClass(n.has+" "+n.solo+" "+n.activePrev+" "+n.active+" "+n.activeNext+" "+n.activedPrev+" "+n.actived+" "+n.activedNext),c.height="",h.$openElement.off("click."+f),h.$closeElement.off("click."+f),h.$depth1.off("mouseover."+f+" mouseleave."+f),h.$depthText.off("click."+f),h.$depthAndText.off("mouseover."+f),h.$depthText.off("keydown."+f),h.$depthTitle1.off("focusin."+f+" focusout."+f),h.$depthTitle2.off("mouseout."+f),t.splice(p,1)}else if("spy"===r){var m=arguments[1];i(m)||(m=h.$activedDepthLastText[0]),m=e(m).first()[0],h.$depthText.is(m)&&h.openMenu.call(m,u)}}}else if(i(d)){var $="",g=parseInt(o.attr("data-menu-type"),10);function x(e){var t="";return e>0&&(t='ul[data-menu-list="'+e+'"]'),t}function C(t){var a=e(t).parents("li"),i=[];s(o,n.state);for(var l=0,d=a.length;l<d;l++){var c=n.state+(r.$depthItem.index(a[l])+1);i.push(c),o.addClass(c)}return 1===i.length&&(i=i[0]),i}function y(t){var a=!1;return r.$activedDepthLastText.length&&("click"===r.event?(r.$depth1Text.is(t)&&!e(t).closest("li").hasClass(n.actived)||o.is(t))&&(a=!0):a=!0),a?o.menu("spy"):r.closeMenu.call(t,u),t}function b(t,a){var n=e(t);"string"==typeof a&&(a=a.toLowerCase());for(var i=0,s=n.length;i<s;i++)if(r.$depthCutItem.is(n[i])){var l=n.eq(i);"prev"===a?n[i]=l.prev("li")[0]:"next"===a&&(n[i]=l.next("li")[0])}return e(n)}v&&o.menu("destroy"),r instanceof Object&&r.constructor===Object||(r={}),r.type=g||1,g||o.attr("data-menu-type",1),r.namespace&&"string"==typeof r.namespace||(r.namespace=o.attr("id")||d.tagName.toLowerCase()+(t.length+1)),r.cut instanceof Object&&r.cut.constructor===Object||(r.cut={}),"string"==typeof r.event&&(r.event=r.event.toLowerCase()),"mouse"!==r.event&&"click"!==r.event&&(r.event="mouse"),r.$openElement=e('div[data-menu-open="'+r.namespace+'"] button[data-menu-button]'),r.$closeElement=e('div[data-menu-close="'+r.namespace+'"] button[data-menu-button]'),r.className={globalActive:r.namespace+a+n.active,globalOpen:r.namespace+a+n.open},r.$wildCard=o.add(o.find("*")),r.$depth=o.find("div[data-menu-depth]"),r.$depth1=r.$depth.filter('div[data-menu-depth="1"]'),r.$depth1Text=r.$depth1.find('a[data-menu-text="1"], button[data-menu-text="1"]'),r.$depthTitle=r.$depth1.find("div[data-menu-title]"),r.$depthTitle1=r.$depthTitle.filter('[data-menu-title="1"]'),r.$depthTitle2=r.$depthTitle.filter('[data-menu-title="2"]'),r.$depth2=r.$depth.filter('[data-menu-depth="2"]'),r.$depthList=r.$depth.find("ul[data-menu-list]"),r.$depthItem=r.$depthList.children("li"),r.$depthText=r.$depth1.find("a[data-menu-text], button[data-menu-text]"),r.$depthLastText=r.$depthText.last(),r.$depthAndText=r.$depth.not('div[data-menu-depth="1"]').add(r.$depthText),r.$activedDepthLastText=r.$depth1.find("[data-menu-text][data-menu-actived]").filter("a, button").last(),r.$activedDepthItem=r.$activedDepthLastText.parents("li"),r.$wildCard.css("transition-property","none"),$=d.clientHeight,r.$wildCard.css("transition-property",""),r.$activedDepthItem.prev("li").addClass(n.activedPrev),r.$activedDepthItem.addClass(n.actived),r.$activedDepthItem.next("li").addClass(n.activedNext),o.addClass(n.initialized);for(var T in r.cut){var N=T.split("-"),w=N.length,I=parseInt(N[0],10),k=parseInt(r.cut[T],10),L=o;if(w>1)for(var P=0;P<w;P++){var M=parseInt(N[P],10);if(!(M>0)){L.length=0;break}var D=P+1,O=x(D);D!==w&&(O+=" > li:nth-child("+M+")"),L=L.find(O)}else 1===w&&I>1&&(L=L.find(x(I)));if(!L.is(o)&&k>1){P=0;for(var A=L.length;P<A;P++)L.eq(P).children("li:nth-child("+k+"n)").next("li").prev("li").after('<li class="'+n.cut+'">&nbsp;</li>')}}r.$depthCutItem=r.$depthList.children("li."+n.cut);T=0;for(var q=r.$depthItem.length;T<q;T++){var E=r.$depthItem.eq(T);E.find("div[data-menu-depth]:first").length?E.addClass(n.has):E.addClass(n.solo)}r.openMenu=function(t){var a=e(this).parents("li"),i=a.first(),s=a.last(),o=s.find('div[data-menu-depth="2"]'),d=b(a.prev("li").get(),"prev"),p=b(a.next("li").get(),"next");if("mouse"===r.event)r.closeMenu.call(this,t);else{var v=a.find("[data-menu-text]:first").filter("a, button").closest("li");v.add(v.siblings("li")).removeClass(n.activePrev+" "+n.active+" "+n.activeNext)}if(l.addClass(r.className.globalActive),d.addClass(n.activePrev),a.addClass(n.active),p.addClass(n.activeNext),C(s.add(s.find("ul[data-menu-list] > li")).filter("."+n.active).last().find("[data-menu-text]:first").filter("a, button")[0]),1===r.type||2===r.type){var u=i.find("div[data-menu-depth]:first");function h(){var t="";if(1===r.type){t=[];for(var a=0,n=r.$depth2.length;a<n;a++)t[a]=r.$depth2.eq(a).children().filter(function(t,a){var n=e(a).css("position");return"static"===n||"relative"===n}).first().outerHeight()||0;t=Math.max.apply(null,t)||""}else 2===r.type&&(t=o.children().filter(function(t,a){var n=e(a).css("position");return"static"===n||"relative"===n}).first().outerHeight()||"");t&&(t+=$,t+="px"),c.height=t}h(),u.length&&u.one("transitionend."+r.namespace,function(e){i.hasClass(n.active)&&h()})}t.stopPropagation()},r.closeMenu=function(t){var a=e(this);if("mouse"===r.event)l.removeClass(r.className.globalActive),s(o,n.state),c.height="",r.$depthItem.removeClass(n.activePrev+" "+n.active+" "+n.activeNext);else{var i=this,d=a.parents("li");if(a.is(r.$depthLastText)){var p=b(d.prev("li").get(),"prev"),v=b(d.next("li").get(),"next");i=d.last().find('[data-menu-text="1"]').filter("a, button")[0],p.removeClass(n.activePrev),d.removeClass(n.active),v.removeClass(n.activeNext),s(o,n.state)}else{var u=d.first(),h=b(u.prev("li")[0],"prev"),f=b(u.next("li")[0],"next");h.removeClass(n.activePrev),u.removeClass(n.active),f.removeClass(n.activeNext),C(d.eq(1).find("[data-menu-text]:first").filter("a, button")[0])}r.$depth1Text.is(i)&&(l.removeClass(r.className.globalActive),1!==r.type&&2!==r.type||(c.height=""))}t.stopPropagation()},r.toggleMenu=function(t){for(var a=e(this),i=a.closest("li"),s=i.find("div[data-menu-depth]:first"),l=s.find("ul[data-menu-list]:first > li a[data-menu-text]:first-of-type"),o=this.tagName.toLowerCase(),d=i.hasClass(n.active),c=a.attr("href")||"",p=!1,v=0,u=l.length;v<u;v++)if(c===l.eq(v).attr("href")){p=!0;break}s.length&&(d?"button"!==o&&!p&&window.confirm("콘텐츠로 이동하시겠습니까?")||(y(this),t.preventDefault()):(r.openMenu.call(this,t),t.preventDefault())),t.stopPropagation()},"mouse"===r.event?(r.$depthAndText.on("mouseover."+r.namespace,r.openMenu),r.$depth1.on("mouseover."+r.namespace,function(t){l.hasClass(r.className.globalActive)&&(1===r.type&&e(this).is(t.target)||2===r.type&&!r.$depthTitle1.add(r.$depthTitle1.find("*")).is(t.target))&&y(this)}).on("mouseleave."+r.namespace,function(e){y(this)}),r.$depthTitle1.on("focusin."+r.namespace,function(e){1===r.type&&r.openMenu.call(this,e)}).on("focusout."+r.namespace,function(e){1===r.type&&y(this)}),r.$depthTitle2.on("mouseout."+r.namespace,function(e){1===r.type&&y(this)}),r.$depthText.on("keydown."+r.namespace,function(e){13===(e.keyCode||e.which)&&r.toggleMenu.call(this,e)})):r.$depthText.on("click."+r.namespace,r.toggleMenu),r.$openElement.on("click."+r.namespace,function(e){l.toggleClass(r.className.globalOpen)}),r.$closeElement.on("click."+r.namespace,function(e){l.removeClass(r.className.globalOpen)}),t.push({element:d,option:r}),y(d)}return o}})}(window.jQuery)}catch(e){console.error(e)}