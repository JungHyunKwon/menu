/**
 * @name menu
 * @author JungHyunKwon
 * @since 2018-02-23
 * @param {object} option {event : string, cut : object[number || string[number-number] : number], namespace : string}
 * @return {jQueryElement || jQueryObject}
 */
try{if("function"!=typeof window.jQuery)throw"제이쿼리가 없습니다.";!function(e){var t=[],a="_",n={active:"active",state:"state",has:"has",solo:"solo",open:"open",prev:"prev",next:"next",cut:"cut",initialized:"menu_initialized"};if(n.activePrev=n.active+a+n.prev,n.activeNext=n.active+a+n.next,n.actived=n.active+"d",n.activedPrev=n.actived+a+n.prev,n.activedNext=n.actived+a+n.next,!(window.console instanceof Object)){window.console={method:["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],comment:[]};for(var i=0,s=window.console.method.length;i<s;i++)"function"!=typeof window.console[window.console.method[i]]&&(window.console[window.console.method[i]]=function(){var e=[],t=arguments.length;if(t>1)for(var a=0;a<t;a++)e.push(arguments[a]);else 1===t&&(e=arguments[0]);return t&&this.comment.push(e),e})}function o(e){var t=!1;function a(e){var t=!1;try{t=document.documentElement.contains(e)}catch(e){}return e!==window&&e!==document||(t=!0),t}return(a(e)||function(e){var t=!1;if("function"==typeof window.jQuery&&e instanceof window.jQuery){var n=e.length;t=[];for(var i=0;i<n;i++){var s=e[i];a(s)&&t.push(s)}var o=t.length;o&&n===o&&(t=!0)}return t}(e))&&(t=!0),t}function r(t,a){for(var n=[],i=e(t),s="string"==typeof a?a.length:0,o=0,r=i.length;o<r;o++){var l=i.eq(o),d=l.attr("class");if(d)for(var c=0,p=(d=d.split(/\s/)).length;c<p;c++){var v=d[c];v.substring(0,s)===a&&(l.removeClass(v),n.push(v))}}return 1===n.length&&(n=n[0]),n}e(function(){var i=e("body");e.fn.menu=function(s){var l=this.first(),d=l[0]||{},c=d.style,p=function(a){for(var n=e(a),i=[],s=t.length,o=0,r=n.length;o<r;o++){var l=n.eq(o),d=!1,c=0;for(s=t.length;c<s;c++){var p=t[c];if(p instanceof Object&&l.is(p.element)){i.push(c),d=!0;break}}d||i.push(-1)}return 1===i.length&&(i=i[0]),i}(d),v=t[p],u=e.Event("menu");if("string"==typeof s){if(s=s.toLowerCase(),v){var f=v.option;if("destroy"===s){var h=f.namespace;f.$depthCutItem.remove(),l.removeClass(n.initialized),i.removeClass(f.className.globalActive+" "+f.className.globalOpen),r(l,n.state),f.$depthItem.removeClass(n.has+" "+n.solo+" "+n.activePrev+" "+n.active+" "+n.activeNext+" "+n.activedPrev+" "+n.actived+" "+n.activedNext),c.height="",f.$openElement.off("click."+h),f.$closeElement.off("click."+h),f.$depth1.off("mouseover."+h+" mouseleave."+h),f.$depthText.off("click."+h),f.$depthAndText.off("mouseover."+h),f.$depthText.off("keydown."+h),f.$depthTitle2.off("mouseout."+h),t.splice(p,1)}else if("spy"===s){var m=arguments[1];o(m)||(m=f.$activedDepthText[0]),m=e(m).first()[0],f.$depthText.is(m)&&f.openMenu.call(m,u)}}}else if(o(d)){var g="";function $(e){var t="";return e>0&&(t='div[data-menu-depth="'+e+'"]:first-of-type ul[data-menu-list="'+e+'"]:first-of-type'),t}function x(t){var a=e(t).parents("li"),i=[];r(l,n.state);for(var o=0,d=a.length;o<d;o++){var c=n.state+(s.$depthItem.index(a[o])+1);i.push(c),l.addClass(c)}return 1===i.length&&(i=i[0]),i}function C(e){return s.$activedDepthText.length?l.menu("spy"):s.closeMenu.call(e,u),e}function y(t,a){var n=e(t);"string"==typeof a&&(a=a.toLowerCase());for(var i=0,o=n.length;i<o;i++)if(s.$depthCutItem.is(n[i])){var r=n.eq(i);"prev"===a?n[i]=r.prev("li")[0]:"next"===a&&(n[i]=r.next("li")[0])}return e(n)}v&&l.menu("destroy"),s instanceof Object||(s={}),s.namespace&&"string"==typeof s.namespace||(s.namespace=l.attr("id")||d.tagName.toLowerCase()+(t.length+1)),s.cut instanceof Object||(s.cut={}),"string"==typeof s.event&&(s.event=s.event.toLowerCase()),"mouse"!==s.event&&"click"!==s.event&&(s.event="mouse"),s.$openElement=e('div[data-menu-open="'+s.namespace+'"] button[data-menu-button]'),s.$closeElement=e('div[data-menu-close="'+s.namespace+'"] button[data-menu-button]'),s.className={globalActive:s.namespace+a+n.active,globalOpen:s.namespace+a+n.open},s.type=parseInt(l.attr("data-menu-type"),10)||1,s.$wildCard=l.add(l.find("*")),s.$depth=l.find("div[data-menu-depth]"),s.$depth1=s.$depth.filter('div[data-menu-depth="1"]'),s.$depth1Text=s.$depth1.find('a[data-menu-text="1"], button[data-menu-text="1"]'),s.$depthTitle1=s.$depth1.find('div[data-menu-title="1"]'),s.$depthTitle2=s.$depth1.find('div[data-menu-title="2"]'),s.$depth2=s.$depth.filter('[data-menu-depth="2"]'),s.$depthList=s.$depth.find("ul[data-menu-list]"),s.$depthItem=s.$depthList.children("li"),s.$depthText=s.$depth1.find("a[data-menu-text], button[data-menu-text]"),s.$depthLastText=s.$depthText.last(),s.$depthAndText=s.$depth.not('div[data-menu-depth="1"]').add(s.$depthText),s.$activedDepthText=s.$depth1.find("a[data-menu-text][data-menu-actived], button[data-menu-text][data-menu-actived]").last(),s.$activedDepthItem=s.$activedDepthText.parents("li"),s.$wildCard.css("transition-property","none"),g=d.clientHeight,s.$wildCard.css("transition-property",""),s.$activedDepthItem.prev("li").addClass(n.activedPrev),s.$activedDepthItem.addClass(n.actived),s.$activedDepthItem.next("li").addClass(n.activedNext),l.addClass(n.initialized);for(var w in s.cut){var b=w.split("-"),T=b.length,N=parseInt(b[0],10),k=parseInt(s.cut[w],10),I=l;if(T>1)for(var P=0;P<T;P++){var E=parseInt(b[P],10);if(!(E>0)){I.length=0;break}var M=P+1,D=$(M);M!==T&&(D+=" > li:nth-child("+E+")"),I=I.find(D)}else 1===T&&N>1&&(I=I.find($(N)));if(!I.is(l)&&k>1){P=0;for(var L=I.length;P<L;P++)I.eq(P).children("li:nth-child("+k+"n)").next("li").prev("li").after('<li class="'+n.cut+'">&nbsp;</li>')}}s.$depthCutItem=s.$depthList.children("li."+n.cut);w=0;for(var A=s.$depthItem.length;w<A;w++){var j=s.$depthItem.eq(w);j.find("div[data-menu-depth]:first").length?j.addClass(n.has):j.addClass(n.solo)}s.openMenu=function(t){var a=e(this).parents("li"),o=a.first(),r=a.last(),l=r.find('div[data-menu-depth="2"]'),d=y(a.prev("li").get(),"prev"),p=y(a.next("li").get(),"next");if("mouse"===s.event)s.closeMenu.call(this,t);else if("click"===s.event){var v=a.find("[data-menu-text]:first").filter("a, button").closest("li");v.add(v.siblings("li")).removeClass(n.activePrev+" "+n.active+" "+n.activeNext)}if(i.addClass(s.className.globalActive),d.addClass(n.activePrev),a.addClass(n.active),p.addClass(n.activeNext),x(r.add(r.find("div[data-menu-depth]:first-of-type ul[data-menu-list]:first > li")).filter("."+n.active).last().find("[data-menu-text]:first").filter("a, button")[0]),1===s.type||2===s.type){var u=o.find("div[data-menu-depth]:first");function f(){var t="";if(1===s.type){t=[];for(var a=0,n=s.$depth2.length;a<n;a++)t[a]=s.$depth2.eq(a).children().filter(function(t,a){var n=e(a).css("position");return"static"===n||"relative"===n}).first().outerHeight()||0;t=Math.max.apply(null,t)||""}else 2===s.type&&(t=l.children().filter(function(t,a){var n=e(a).css("position");return"static"===n||"relative"===n}).first().outerHeight()||"");t&&(t+=g,t+="px"),c.height=t}f(),u.length&&u.one("transitionend."+s.namespace,function(e){o.hasClass(n.active)&&f()})}t.stopPropagation()},s.closeMenu=function(t){var a=e(this);if("mouse"===s.event)i.removeClass(s.className.globalActive),r(l,n.state),c.height="",s.$depthItem.removeClass(n.activePrev+" "+n.active+" "+n.activeNext);else if("click"===s.event){var o=this,d=a.parents("li");if(a.is(s.$depthLastText)){var p=y(d.prev("li").get(),"prev"),v=y(d.next("li").get(),"next");o=d.last().find('[data-menu-text="1"]').filter("a, button")[0],p.removeClass(n.activePrev),d.removeClass(n.active),v.removeClass(n.activeNext),r(l,n.state)}else{var u=d.first(),f=y(u.prev("li")[0],"prev"),h=y(u.next("li")[0],"next");f.removeClass(n.activePrev),u.removeClass(n.active),h.removeClass(n.activeNext),x(d.eq(1).find("[data-menu-text]:first").filter("a, button")[0])}s.$depth1Text.is(o)&&(i.removeClass(s.className.globalActive),1!==s.type&&2!==s.type||(c.height=""))}t.stopPropagation()},s.toggleMenu=function(t){for(var a=e(this),i=a.closest("li"),o=i.find("div[data-menu-depth]:first"),r=o.find("ul[data-menu-list]:first > li a[data-menu-text]:first-of-type"),l=this.tagName.toLowerCase(),d=i.hasClass(n.active),c=a.attr("href")||"",p=!1,v=0,u=r.length;v<u;v++)if(c===r.eq(v).attr("href")){p=!0;break}o.length&&(d?"button"!==l&&!p&&window.confirm("콘텐츠로 이동하시겠습니까?")||(C(this),t.preventDefault()):(s.openMenu.call(this,t),t.preventDefault())),t.stopPropagation()},"mouse"===s.event?(s.$depthAndText.on("mouseover."+s.namespace,s.openMenu),s.$depth1.on("mouseover."+s.namespace,function(t){i.hasClass(s.className.globalActive)&&(1===s.type&&e(this).is(t.target)||2===s.type&&!s.$depthTitle1.add(s.$depthTitle1.find("*")).is(this))&&C(this)}).on("mouseleave."+s.namespace,function(e){C(this)}),s.$depthTitle2.on("mouseout."+s.namespace,function(e){1===s.type&&C(this)}),s.$depthText.on("keydown."+s.namespace,function(e){13===(e.keyCode||e.which)&&s.toggleMenu.call(this,e)})):"click"===s.event&&s.$depthText.on("click."+s.namespace,s.toggleMenu),s.$openElement.on("click."+s.namespace,function(e){i.toggleClass(s.className.globalOpen)}),s.$closeElement.on("click."+s.namespace,function(e){i.removeClass(s.className.globalOpen)}),t.push({element:d,option:s}),C()}return l}})}(jQuery)}catch(e){console.error(e)}